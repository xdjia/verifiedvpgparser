# A Verified VPG Parser Generator: Benchmarks

This library `TCFGParser` provides a surface grammar called tagged CFGs
for an easier usage of a verified parser generator for visibly pushdown
grammars (VPGs).

## Requirements

```
opam >= 2.1.4
Bison >= 3.8.2
ANTLR 4
Python 3
OpenJDK 11
```

Please download from [ANTLR's website](https://www.antlr.org/download.html) and put `antlr-4.11.1-complete.jar` under the folder `eval_antlr/`.

## Build

The library `TCFGParser` depends on a Coq library for parsing VPGs.
Please run `make` in the parent folder `../`, which compiles and exports
the Coq library to an OCaml library `VerifiedParser` and copies it under
`CoqParser/`. 

Then, run the following commands to create a local opam switch for OCaml and install the external dependencies, and produce the tokens to be used by the VPG parsers.

```
make ./_opam && make ./Data
```

Then run the benchmark using the following command.

```Shell
make run_bench && make run_vpg_bench
```

## Plot the figures

To plot the figures for the results generated by `make run_bench`, open and run the Jupyter notebooks under the folder `plot`. Please install the Python library `Matplotlib` first.

```Shell
pip install matplotlib scienceplots
```

## Use the verified parser directly

We can directly run the extracted Coq library on VPGs, e.g., use it to parse the TCFG grammar file, with the following command.
```
dune exec parse/parse_tcfg.exe tcfgs/tcfg.tcfg
```

## References

- [1] Xiaodong Jia, Ashish Kumar, and Gang Tan. 2021. A derivative-based
  parser generator for visibly Pushdown grammars. Proc. ACM Program.
  Lang. 5, OOPSLA, Article 151 (October 2021), 24 pages.
  https://doi.org/10.1145/3485528
