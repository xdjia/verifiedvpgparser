<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Monad</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Monad</h1>

<div class="code">
</div>

<div class="doc">
This library is from <i>Jay McCarthy, Burke Fetscher, Max New, Daniel
  Feltey, and Robert Bruce Findler. 2016. A Coq library for internal
  verification of running-times. In International Symposium on
  Functional and Logic Programming. Springer, 144–162.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">C</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">P</span>:<span class="id" title="var">A</span> → <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;{<span class="id" title="var">a</span> : <span class="id" title="var">A</span> | <span class="id" title="tactic">∃</span> (<span class="id" title="var">an</span>:<span class="id" title="var">nat</span>), (<span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">an</span>)}.<br/>
<span class="id" title="keyword">Local Hint Unfold</span> <span class="id" title="var">C</span> : <span class="id" title="var">monad</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ret</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">P</span>:<span class="id" title="var">A</span> → <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">Pa0</span>:<span class="id" title="var">P</span> <span class="id" title="var">a</span> 0) : <span class="id" title="var">C</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span><br/>
:= <span class="id" title="var">exist</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="tactic">∃</span> <span class="id" title="var">n</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>) <span class="id" title="var">a</span> (<span class="id" title="var">ex_intro</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> ⇒ <span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>) 0 <span class="id" title="var">Pa0</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">bind</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">PA</span>:<span class="id" title="var">A</span> → <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">B</span>:<span class="id" title="keyword">Type</span>) (<span class="id" title="var">PB</span>:<span class="id" title="var">B</span> → <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">am</span>:<span class="id" title="var">C</span> <span class="id" title="var">A</span> <span class="id" title="var">PA</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">bf</span>:<span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">pa</span>:<span class="id" title="tactic">∃</span> <span class="id" title="var">an</span>, <span class="id" title="var">PA</span> <span class="id" title="var">a</span> <span class="id" title="var">an</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">C</span> <span class="id" title="var">B</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> <span class="id" title="var">bn</span> ⇒ <span class="id" title="keyword">∀</span> <span class="id" title="var">an</span>, <span class="id" title="var">PA</span> <span class="id" title="var">a</span> <span class="id" title="var">an</span> → <span class="id" title="var">PB</span> <span class="id" title="var">b</span> (<span class="id" title="var">an</span>+<span class="id" title="var">bn</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id" title="var">C</span> <span class="id" title="var">B</span> <span class="id" title="var">PB</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">am</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">a</span> <span class="id" title="var">Pa</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<span class="id" title="var">bf</span> <span class="id" title="var">a</span> <span class="id" title="var">Pa</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">b</span> <span class="id" title="var">Pb</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Pa</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">an</span> <span class="id" title="var">Pa</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Pb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">bn</span> <span class="id" title="var">Pb</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">an</span> + <span class="id" title="var">bn</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Pb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Pa</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inc</span> (<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>) <span class="id" title="var">k</span> (<span class="id" title="var">PA</span> : <span class="id" title="var">A</span> → <span class="id" title="var">nat</span> → <span class="id" title="keyword">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">xc</span>:<span class="id" title="var">C</span> <span class="id" title="var">A</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">xn</span> ⇒ <span class="id" title="keyword">∀</span> <span class="id" title="var">xm</span>, <span class="id" title="var">xn</span> + <span class="id" title="var">k</span> = <span class="id" title="var">xm</span> → <span class="id" title="var">PA</span> <span class="id" title="var">x</span> <span class="id" title="var">xm</span>))<br/>
: <span class="id" title="var">C</span> <span class="id" title="var">A</span> <span class="id" title="var">PA</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">Px</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Px</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n</span> <span class="id" title="var">Px</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">n</span> + <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Px</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;&lt;== x" := (<span class="id" title="var">ret</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 55).<br/>
<span class="id" title="keyword">Notation</span> &quot;+= k ; c" := (<span class="id" title="var">inc</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span> <span class="id" title="var">_</span> <span class="id" title="var">c</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;x &lt;- y ; z" := (<span class="id" title="var">bind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">y</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">x</span> : <span class="id" title="var">_</span>) (<span class="id" title="var">am</span> : <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">z</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> &quot;x &gt;&gt;= y" := (<span class="id" title="var">bind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 55).<br/>
<span class="id" title="keyword">Notation</span> &quot;x &gt;&gt; y" := (<span class="id" title="var">bind</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">y</span>)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;{! x !:! A !&lt;! c !&gt;!  P !}" := (<span class="id" title="var">C</span> <span class="id" title="var">A</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">c</span>:<span class="id" title="var">nat</span>) ⇒ <span class="id" title="var">P</span>)) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 55).<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>